var dashlane_pwc_injected_js=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=84)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(18);t.kvReducer=(e={},t)=>{switch(t.type){case"KV_SET":return Object.assign(Object.assign({},e),{[t.key]:t.value});case"KV_UNSET":return delete e[t.key],e;default:return e}},t.kvHasKey=(e,t)=>Object.keys(e.getState().kv).indexOf(t)>-1,t.kvGet=(e,n)=>{if(!t.kvHasKey(e,n))throw new r.KeyError(n);return e.getState().kv[n]},t.kvSet=(e,t,n)=>e.dispatch({type:"KV_SET",key:t,value:n,path:"kv"}),t.kvUnset=(e,t)=>e.dispatch({type:"KV_UNSET",key:t,path:"kv"}),t.kvGetByPrefix=(e,t)=>{const n=e.getState().kv;return Object.keys(n).filter(e=>e.startsWith(t)).map(e=>{const t=e.split(".");return{[t[t.length-1]]:n[e]}}).reduce((e,t)=>Object.assign(Object.assign({},e),t))},t.kvUtils=e=>({get:n=>t.kvGet(e,n),hasKey:n=>t.kvHasKey(e,n),set:(n,r)=>t.kvSet(e,n,r),unset:n=>t.kvUnset(e,n)})},function(e,t,n){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0});const o=n(11);t.DEFAULT_SEPARATOR=", ",t.globalWindow=(()=>{if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==e)return e;throw new Error("unable to locate global object")})(),void 0===t.globalWindow.btoa&&(t.globalWindow.btoa=e=>{let t;return t=e instanceof r?e:r.from(e.toString(),"binary"),t.toString("base64")}),void 0===t.globalWindow.atob&&(t.globalWindow.atob=e=>r.from(e,"base64").toString("binary")),t.toString=(e,n=t.DEFAULT_SEPARATOR)=>{if(null==e)return"";if(e instanceof Array)return e.map(e=>t.toString(e,n)).join(n);if(e instanceof RegExp)return e.toString();switch(typeof e){case"object":let t;try{t=JSON.stringify(e,null,0)}catch(e){return e}return t;default:return String(e)}},t.sleep=(e=1e3,n=!1)=>{if(n=Boolean(n)){const n=e/2;e=t.getRandomInt(e-n,e+n)}return new Promise(n=>t.globalWindow.setTimeout(n,e))},t.prettyJson=(e,t=4)=>JSON.stringify(e,null,t),t.parseJson=e=>{let t;try{t=JSON.parse(e)}catch(e){return e}return t},t.deathClock=(e,n)=>{const r=t.globalWindow.setTimeout(()=>n,e);return{cancel:()=>t.globalWindow.clearTimeout(r),timeoutId:r}},t.getRandomArbitrary=(e,t)=>{if(e>=t)throw new o.ApcError("MinGreaterThanMaxError");return Math.random()*(t-e)+e},t.getRandomInt=(e,t)=>{if(e>=t)throw new o.ApcError("MinGreaterThanMaxError");return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e};t.DeathClock=class{constructor(e){this.ms=e,this.executeHandlersHelper=e=>{e&&this.handlers.map(e=>e())},this.handlers=[]}addHandler(e){this.handlers.push(e)}restart(e){e=void 0!==e&&e,this.timeoutId&&this.stop(e),this.start()}start(){this.timeoutId=t.globalWindow.setTimeout(()=>{this.stop(!0)},this.ms)}stop(e){if(!this.timeoutId)throw new o.ApcError("DeatchClokNotStartedError");t.globalWindow.clearTimeout(this.timeoutId),this.timeoutId=void 0,e=void 0===e||e,this.executeHandlersHelper(e)}},t.b64EncodeUnicode=e=>t.globalWindow.btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(e,t)=>String.fromCharCode("0x"+t))),t.b64DecodeUnicode=e=>decodeURIComponent(t.globalWindow.atob(e).split("").map(e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)).join("")),t.filterProps=(e,t=[])=>Object.keys(e).filter(e=>-1===t.indexOf(e)).map(t=>({[t]:e[t]})).reduce((e,t)=>Object.assign(Object.assign({},e),t),{})}).call(this,n(17),n(50).Buffer)},function(e,t){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),s=n(2),a=function(){throw new Error("Slot not connected")};t.defaultSlotConfig={noBuffer:!1};var c=function(e){return Object.assign((function(){return a()}),{config:e,lazy:function(){return a},on:function(){return a},slotName:"Not connected"})},u=function(e,t){return Object.keys(t).reduce((function(n,r){return n.concat(t[r][e]||[])}),[])},l=function(e){return Object.keys(e).reduce((function(t,n){var r=e[n],i=Object.keys(r).filter((function(e){return(r[e]||[]).length>0})),s=[].concat(o(t),o(i));return[].concat(o(new Set(s)))}),[])};t.slot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.defaultSlotConfig;return c(e)},t.connectSlot=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=t.reduce((function(e,t,n){return Object.assign({},e,r({},n,{}))}),r({},"LOCAL_TRANSPORT",{})),c=t.reduce((function(e,t,n){return Object.assign({},e,r({},n,{}))}),{}),f=function(e,t){var n=function(){},r=new Promise((function(e){return n=e}));c[e][t]={registered:r,onRegister:n}},h=[],p=[],d=function(e){return h.forEach((function(t){return t(e)}))},g=function(e){return p.forEach((function(t){return t(e)}))};function y(e,r){var l=2===arguments.length,h=l?r:e,p=l?e:s.DEFAULT_PARAM;if(n.noBuffer||0===t.length){var d=u(p,a);return i.callHandlers(h,d)}t.forEach((function(e,t){c[t][p]||f(String(t),p)}));var g=t.reduce((function(e,t,n){return[].concat(o(e),[c[n][p].registered])}),[]);return Promise.all(g).then((function(){var e=u(p,a);return i.callHandlers(h,e)}))}function v(e,t){return h.push(e),p.push(t),l(a).forEach(e),function(){l(a).forEach(t);var n=h.indexOf(e);n>-1&&h.splice(n,1);var r=p.indexOf(t);r>-1&&p.splice(r,1)}}function m(n,r){var o="",i=function(){return new Promise((function(e){return e()}))};return"string"==typeof n?(o=n,i=r||i):(o=s.DEFAULT_PARAM,i=n),t.forEach((function(t){return t.registerHandler(e,o,i)})),a.LOCAL_TRANSPORT[o]=(a.LOCAL_TRANSPORT[o]||[]).concat(i),1===u(o,a).length&&d(o),function(){t.forEach((function(t){return t.unregisterHandler(e,o,i)}));var n=(a.LOCAL_TRANSPORT[o]||[]).indexOf(i);-1!==n&&a.LOCAL_TRANSPORT[o].splice(n,1),0===u(o,a).length&&g(o)}}return t.forEach((function(t,n){t.addRemoteHandlerRegistrationCallback(e,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.DEFAULT_PARAM,t=arguments[1],r=a[n][e]||[];a[n][e]=r.concat(t),1===u(e,a).length&&d(e),c[n][e]||f(String(n),e),c[n][e].onRegister()})),t.addRemoteHandlerUnregistrationCallback(e,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.DEFAULT_PARAM,t=arguments[1],r=a[n][e]||[],o=r.indexOf(t);o>-1&&a[n][e].splice(o,1),0===u(e,a).length&&g(e),f(String(n),e)}))})),Object.assign(y,{on:m,lazy:v,config:n,slotName:e})}},function(e,t,n){"use strict";function r(e,t){var n=null;try{n=e(t)}catch(e){return Promise.reject(e)}return n&&n.then?n:Promise.resolve(n)}Object.defineProperty(t,"__esModule",{value:!0}),t.callHandlers=function(e,t){return t&&0!==t.length?1===t.length?r(t[0],e):Promise.all(t.map((function(t){return r(t,e)}))):new Promise((function(e){}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PARAM="$_DEFAULT_$"},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3;o(this,e),this._timeout=t,this._onMessageCallbacks=[],this._onConnectCallbacks=[],this._onDisconnectCallbacks=[],this._onErrorCallbacks=[],this._ready=!1}return r(e,[{key:"onData",value:function(e){-1===this._onMessageCallbacks.indexOf(e)&&this._onMessageCallbacks.push(e)}},{key:"onConnect",value:function(e){this._ready&&e(),this._onConnectCallbacks.push(e)}},{key:"onDisconnect",value:function(e){this._onDisconnectCallbacks.push(e)}},{key:"onError",value:function(e){this._onErrorCallbacks.push(e)}},{key:"_messageReceived",value:function(e){this._onMessageCallbacks.forEach((function(t){return t(e)}))}},{key:"_error",value:function(e){this._onErrorCallbacks.forEach((function(t){return t(e)}))}},{key:"_connected",value:function(){this._ready=!0,this._onConnectCallbacks.forEach((function(e){return e()}))}},{key:"_disconnected",value:function(){this._ready=!1,this._onDisconnectCallbacks.forEach((function(e){return e()}))}},{key:"timeout",get:function(){return this._timeout}}]),e}();t.GenericChannel=i},function(e,t,n){e.exports=n(5)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.slot=r.slot;var o=n(6);t.combineEvents=o.combineEvents,t.createEventBus=o.createEventBus;var i=n(3);t.GenericChannel=i.GenericChannel;var s=n(8);t.ChunkedChannel=s.ChunkedChannel;var a=n(2);t.DEFAULT_PARAM=a.DEFAULT_PARAM},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=n(7);t.combineEvents=function(e,t,n,o,i,s,a,c,u,l,f,h,p,d,g,y,v,m,b,w,O,_,E,j){var S=Array.from(arguments),P=S.reduce((function(e,t){return[].concat(r(e),r(Object.keys(t)))}),[]),R=[].concat(r(new Set(P)));if(P.length>R.length)throw new Error("ts-event-bus: duplicate slots encountered in combineEvents.");return Object.assign.apply(Object,[{}].concat(r(S)))},t.createEventBus=function(e){var t=(e.channels||[]).map((function(e){return new i.Transport(e)}));return Object.keys(e.events).reduce((function(n,r){var i=e.events[r].config;return n[r]=o.connectSlot(r,t,i),n}),{})}},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=0,s=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._channel=t,this._localHandlers={},this._localHandlerRegistrations={},this._remoteHandlers={},this._remoteHandlerRegistrationCallbacks={},this._remoteHandlerDeletionCallbacks={},this._pendingRequests={},this._channelReady=!1,this._channel.onData((function(e){switch(e.type){case"request":return n._requestReceived(e);case"response":return n._responseReceived(e);case"handler_registered":return n._registerRemoteHandler(e);case"handler_unregistered":return n._unregisterRemoteHandler(e);case"error":return n._errorReceived(e);default:!function(e){throw new Error("Should not happen: "+e)}(e)}})),this._channel.onConnect((function(){n._channelReady=!0,Object.keys(n._localHandlerRegistrations).forEach((function(e){n._localHandlerRegistrations[e].forEach((function(e){n._channel.send(e)}))}))})),this._channel.onDisconnect((function(){n._channelReady=!1,n._unregisterAllRemoteHandlers(),n._rejectAllPendingRequests(new Error("REMOTE_CONNECTION_CLOSED"))})),this._channel.onError((function(e){return n._rejectAllPendingRequests(e)}))}return r(e,[{key:"_requestReceived",value:function(e){var t=this,n=e.slotName,r=e.data,i=e.id,s=e.param,a=this._localHandlers[n];if(a){var c=a[s];c&&o.callHandlers(r,c).then((function(e){return t._channel.send({type:"response",slotName:n,id:i,data:e,param:s})})).catch((function(e){return t._channel.send({id:i,message:""+e,param:s,slotName:n,stack:e.stack||"",type:"error"})}))}}},{key:"_responseReceived",value:function(e){var t=e.slotName,n=e.data,r=e.id,o=e.param,i=this._pendingRequests[t];i&&i[o]&&i[o][r]&&(i[o][r].resolve(n),delete i[o][r])}},{key:"_errorReceived",value:function(e){var t=e.slotName,n=e.id,r=e.message,o=e.stack,i=e.param,s=this._pendingRequests[t];if(s&&s[i]&&s[i][n]){var a=new Error(r+" on "+t+" with param "+i);a.stack=o||a.stack,this._pendingRequests[t][i][n].reject(a),delete this._pendingRequests[t][i][n]}}},{key:"_registerRemoteHandler",value:function(e){var t=this,n=e.slotName,r=e.param,o=this._remoteHandlerRegistrationCallbacks[n];if(o){var s=this._remoteHandlers[n];if(!s||!s[r]){var a=function(e){return new Promise((function(o,s){if(!t._channelReady)return s(new Error("CHANNEL_NOT_READY on "+n));var a=""+i++;t._pendingRequests[n]=t._pendingRequests[n]||{},t._pendingRequests[n][r]=t._pendingRequests[n][r]||{},t._pendingRequests[n][r][a]={resolve:o,reject:s},t._channel.send({type:"request",id:a,slotName:n,param:r,data:e}),setTimeout((function(){var e=((t._pendingRequests[n]||{})[r]||{})[a];if(e){var o=new Error("TIMED_OUT on "+n+" with param "+r);e.reject(o),delete t._pendingRequests[n][r][a]}}),t._channel.timeout)}))};this._remoteHandlers[n]=this._remoteHandlers[n]||{},this._remoteHandlers[n][r]=a,o(r,a)}}}},{key:"_unregisterRemoteHandler",value:function(e){var t=e.slotName,n=e.param,r=this._remoteHandlerDeletionCallbacks[t],o=this._remoteHandlers[t];if(o){var i=o[n];i&&r&&(r(n,i),delete this._remoteHandlers[t][n])}}},{key:"_unregisterAllRemoteHandlers",value:function(){var e=this;Object.keys(this._remoteHandlerDeletionCallbacks).forEach((function(t){var n=e._remoteHandlers[t];n&&Object.keys(n).filter((function(e){return n[e]})).forEach((function(n){return e._unregisterRemoteHandler({slotName:t,param:n})}))}))}},{key:"_rejectAllPendingRequests",value:function(e){var t=this;Object.keys(this._pendingRequests).forEach((function(n){Object.keys(t._pendingRequests[n]).forEach((function(r){Object.keys(t._pendingRequests[n][r]).forEach((function(o){t._pendingRequests[n][r][o].reject(e)}))})),t._pendingRequests[n]={}}))}},{key:"addRemoteHandlerRegistrationCallback",value:function(e,t){this._remoteHandlerRegistrationCallbacks[e]||(this._remoteHandlerRegistrationCallbacks[e]=t)}},{key:"addRemoteHandlerUnregistrationCallback",value:function(e,t){this._remoteHandlerDeletionCallbacks[e]||(this._remoteHandlerDeletionCallbacks[e]=t)}},{key:"registerHandler",value:function(e,t,n){if(this._localHandlers[e]=this._localHandlers[e]||{},this._localHandlers[e][t]=this._localHandlers[e][t]||[],this._localHandlers[e][t].push(n),1===this._localHandlers[e][t].length){var r={type:"handler_registered",param:t,slotName:e};this._localHandlerRegistrations[t]=this._localHandlerRegistrations[t]||[],this._localHandlerRegistrations[t].push(r),this._channelReady&&this._channel.send(r)}}},{key:"unregisterHandler",value:function(e,t,n){var r=this._localHandlers[e];if(r&&r[t]){var o=r[t].indexOf(n);if(o>-1&&(r[t].splice(o,1),0===r[t].length)){var i={type:"handler_unregistered",param:t,slotName:e};this._channelReady&&this._channel.send(i)}}}}]),e}();t.Transport=s},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(r):void 0};Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),s=n(9),a=function(e){if(!e.chunkId)throw new Error("ChunkedMessage did not have a chunkId: "+JSON.stringify(e))},c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.timeout));return n._buffer={},n._chunkSize=e.chunkSize,n._sender=e.sender,n._maxStringAlloc=e.maxStringAlloc||-1,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"send",value:function(e){var t=this,n=JSON.stringify(e);if(n.length<=this._chunkSize)this._sender(e);else{var r=function(e){for(var t=new Uint16Array(e.length),n=0,r=e.length;n<r;n++)t[n]=e.charCodeAt(n);return t}(n),o=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(Array(30))).map((function(){return Math.random().toString(36)[3]})).join("");this._sender({type:"chunk_start",chunkId:o,size:n.length}),!function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=r.slice(n,n+t._chunkSize);i.length&&(t._sender({type:"chunk_data",chunkId:o,data:Array.from(i)}),e(n+t._chunkSize))}(),this._sender({type:"chunk_end",chunkId:o})}}},{key:"_messageReceived",value:function(e){switch(e.type){case"chunk_start":this._receiveNewChunk(e);break;case"chunk_data":this._receiveChunkData(e);break;case"chunk_end":var n=this._mergeChunks(e);o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_messageReceived",this).call(this,n);break;default:o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_messageReceived",this).call(this,e)}}},{key:"_receiveNewChunk",value:function(e){if(a(e),this._buffer[e.chunkId])throw new Error("There was already an entry in the buffer for chunkId "+e.chunkId);this._buffer[e.chunkId]={id:e.chunkId,chunks:[],size:e.size}}},{key:"_receiveChunkData",value:function(e){if(a(e),!this._buffer[e.chunkId])throw new Error("ChunkId "+e.chunkId+" was not found in the buffer");this._buffer[e.chunkId].chunks.push(e.data)}},{key:"_mergeChunks",value:function(e){if(a(e),!this._buffer[e.chunkId])throw new Error("ChunkId "+e.chunkId+" was not found in the buffer");var t=this._buffer[e.chunkId].chunks.reduce((function(e,t,n){return t.forEach((function(t,n){return e.uintArray[e.currentIx+n]=t})),e.currentIx+=t.length,e}),{uintArray:new Uint16Array(this._buffer[e.chunkId].size),currentIx:0}),n=void 0,r=function(e,t){if(-1===t)return String.fromCharCode.apply(null,e);for(var n="",r=0;r<e.length;r+=t)r+t>e.length?n+=String.fromCharCode.apply(null,e.subarray(r)):n+=String.fromCharCode.apply(null,e.subarray(r,r+t));return n}(t.uintArray,this._maxStringAlloc);try{n=JSON.parse(r)}catch(e){throw new Error("Not a valid JSON string: "+r)}if(!s.isTransportMessage(n))throw new Error("Not a transport message: "+JSON.stringify(n));return n}}]),t}(i.GenericChannel);t.ChunkedChannel=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTransportMessage=function(e){switch(e.type){case"request":case"response":case"error":case"handler_unregistered":case"handler_registered":return!0;default:return!1}}}])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(13),o=n(1),i=e=>o.toString(e," ");t.loggerProxy=(e,t,n)=>(...r)=>{if(!e.debug)return;const o=r.map(i).join(" ").trim();return o?t[n](o):void 0},t.logLevelType=["log","debug","warn","error"],t.getLogger=(e,n=console)=>t.logLevelType.map(r=>({[r]:t.loggerProxy(e,n,r)})).reduce((e,t)=>Object.assign(Object.assign({},e),t),{}),t.logger=t.getLogger(r.config,console),t.setLogger=(e,n=console)=>{t.logLevelType.forEach(r=>{t.logger[r]=t.loggerProxy(e,n,r)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let r=[];t.animatorLogger={log:e=>{r.push(e)}},t.getLog=()=>r.join("\n"),t.clearLogs=()=>{r=[]}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});const r=n(9),o=n(4);t.globalWindow=()=>{if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==e)return e;throw new Error("unable to locate global object")},t.objectToDict=e=>{const t={};for(const n in e){if(e.hasOwnProperty(n))continue;const r=e[n];-1!==["string","number","boolean","symbol"].indexOf(typeof r)&&(t[n]=r)}return t},t.fireEvent=(e,t)=>{const n=window.top.document.createEvent("Events");n.initEvent(e,!0,!0),t.dispatchEvent(n)},t.cleanText=e=>e.replace(/\s+/g," ").trim(),t.encodeObject=e=>r.b64EncodeUnicode(JSON.stringify(e)),t.select=e=>document.querySelector(e),t.selectAll=e=>t.nodeListToElement(document.querySelectorAll(e)),t.nodeListToElement=e=>void 0===e?[]:Array.from(e),t.getTextFromElement=e=>{let n="";return e instanceof HTMLInputElement&&(n+=e.value),n+=e.textContent,t.cleanText(n)},t.nativeInputValueSetter=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set,t.setReact=(e,n)=>{if(void 0===t.nativeInputValueSetter)return new Error("NativeInputValueSetterNotSet");Array.from(e).map(e=>{t.nativeInputValueSetter.call(e,n);const r=new Event("input",{bubbles:!0});e.dispatchEvent(r)})};t.getCookies=()=>document.cookie.split(";").map(e=>e.split("=")).map(([e,t])=>((e,t)=>({name:e,value:t}))(e.trim(),t.trim())),t.selectByXpath=(e,n="html",r=XPathResult.ANY_TYPE)=>{const i=document.querySelector(n);if(!i)return void o.animatorLogger.log("[-] UnknownContextNode");const s=(new XPathEvaluator).evaluate(e,i,null,r);if(!s)return;const a=[];for(;;){const e=s.iterateNext();if(!e)break;a.push(e)}return t.nodeListToElement(a)},t.selectAllElements=e=>{if(e.selector)return t.selectAll(e.selector);if(e.xPath)return t.selectByXpath(e.xPath);throw new Error("UnknownSelectType")},t.listReCaptchaInfo=()=>t.selectAll('iframe[src^="https://www.google.com/recaptcha"][src*="/anchor?"]').map(e=>{var n,r;let i;try{i=new URL(e.src).searchParams}catch(e){return o.animatorLogger.log("couldn't parse an iframe URL: "+e.stack),null}const s=i.get("k"),a=i.get("size"),c=null===(r=null===(n=e.parentElement)||void 0===n?void 0:n.parentElement)||void 0===r?void 0:r.querySelector("textarea.g-recaptcha-response");if(!a||!s||!c)return o.animatorLogger.log("recaptcha detected but couldn't find the recaptcha's sitekey/size/responseField"),null;const u=t.select(`iframe[src^="https://www.google.com/recaptcha"][src*="/bframe?"][src*="&k=${s}"]`);return{isChallengeVisible:null!==u&&"hidden"!==window.getComputedStyle(u).visibility,isInvisibleRecaptcha:"invisible"===a,responseField:c,sitekey:s,solved:Boolean(c.value)}}).filter(e=>null!==e)}).call(this,n(17))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(0);t.replacePlaceholderInObject=(e,n)=>Object.keys(n||{}).map(r=>({[r]:t.replacePlaceholders(n[r],e.placeholders,e.store)})).reduce((e,t)=>Object.assign(Object.assign({},e),t),{}),t.replacePlaceholderFromStore=(e,t)=>{const n=t.match(/^%kv\.([^%]+)%$/);return n?r.kvGet(e,n[1]):t},t.replacePlaceholders=(e,t,n)=>null==e||"string"!=typeof e?e:o(e,t,n);const o=(e,n,r)=>e in n?String(n[e]):r?t.replacePlaceholderFromStore(r,e):e;t.makePlaceholders=e=>({"%JOB.EMAIL%":e.email||e.login||"","%JOB.LOGIN%":e.login||e.email,"%JOB.NEWPASS%":e.newPassword,"%JOB.PASS%":e.currentPassword}),t.cleanEvalString=e=>(e||"").replace(/\\'/gm,"'").replace(/\s+/gm," "),t.normalizeString=e=>(e=void 0!==e?e:"").replace(/\s+/g," ").trim().toLowerCase()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(10),o=n(0),i=n(12);t.formatStep=(e,t)=>(n,r,o)=>({msgType:"step",progress:{index:r,label:n,total:o},site:e.site,step:t.step}),t.formatStatus=(e,t,n,i,s)=>{const a=o.kvGet(e.store,"config.engine");return{engine:a||"n/a",engineVersion:r.EngineVersion,error:i,errorCode:void 0,errorDetails:s,errorType:void 0,execTime:Date.now()-e.engine.startedOn,message:n,msgType:"status",site:e.recipeSchema.site,startedOn:e.engine.startedOn,success:t}},t.terminate=(e,n,r,o)=>{const s=n?void 0:r,a=n?r:void 0,c=t.formatStatus(e,n,a,s,o);return i.statusSet(e.store,c),c}},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(39)),r(n(4)),r(n(82)),r(n(83))},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(13)),r(n(30)),r(n(11)),r(n(7)),r(n(10)),r(n(14)),r(n(3)),r(n(54)),r(n(1)),r(n(34)),r(n(15)),r(n(73)),r(n(27))},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(41)),r(n(42)),function(e){e.Domcontentloaded="domcontentloaded"}(t.WaitUntilType||(t.WaitUntilType={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends Error{constructor(e,t){super(e),this.message=e,this.details=t}toString(){return`${this.message}\n\n        ${JSON.stringify(this.details)}`}}t.ApcError=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(19),o=n(0);t.statusReducer=(e={},t)=>{switch(t.type){case"STATUS_SET":return Object.assign(Object.assign({},e),t.status);default:return e}},t.statusSet=(e,t)=>e.dispatch({type:"STATUS_SET",status:t,path:"status"}),t.statusIsSet=e=>0!==Object.keys(e.getState().status).length,t.statusGet=e=>{if(!t.statusIsSet(e))throw new Error("UnsetStatusGetError");return e.getState().status},t.makeErrorStatus=(e,t,n={})=>Object.assign(Object.assign({engine:o.kvGet(e,"config.engine"),engineVersion:o.kvGet(e,"config.engineVersion"),error:t},r.errorCodeAndTypeFromMessage(n,t)),{execTime:-1,msgType:"status",site:"n/a",startedOn:0,success:!1}),t.statusSetErrorWithReaderContext=(e,n)=>t.statusSet(e.store,Object.assign(Object.assign({},t.makeErrorStatus(e.store,n)),{execTime:Date.now()-e.engine.startedOn,site:e.recipeSchema.site,startedOn:e.engine.startedOn})),t.statusUtils=e=>({get:()=>t.statusGet(e),isSet:()=>t.statusIsSet(e),set:n=>t.statusSet(e,n)})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(10);t.config={action:{navigationTimeout:15e3,retryTimeout:1e4,scanTimeout:500,sleep:250,timeout:1e4,typingDelay:25},browser:{closeOnExit:!0,devtools:!1,headless:!0},debug:!0,engine:"n/a",engineVersion:r.EngineVersion,globalTimeout:12e5,randomizeSleep:!1,schemas:{},screenshot:{encoding:"binary",fullPage:!1,omitBackground:!0,path:"",quality:75,type:"jpeg"},step:{sleep:500}}},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(18)),r(n(31)),r(n(0)),r(n(43)),r(n(21)),r(n(12))},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(22)),r(n(36)),r(n(72)),r(n(26)),r(n(35))},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(55)),r(n(56)),r(n(57)),r(n(58)),r(n(59)),r(n(60)),r(n(61)),r(n(62)),r(n(63)),r(n(24)),r(n(64)),r(n(33)),r(n(65)),r(n(66)),r(n(67)),r(n(68)),r(n(69)),r(n(23))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends Error{constructor(e){super(),this.key=e.key?e.key:"unknownKey",this.value=e.value,this.message=void 0!==e.message?e.message:"StoreError"}toString(){return`key: ${this.key} (${this.value?`value: ${this.value},`:""}), message: ${this.message}`}}t.StoreError=r;t.KeyError=class extends r{constructor(e){super({key:e,message:`KeyError<${e}>`}),this.key=e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(30),o=/^(LOGIN\.|USER\.|NEED_USER_ACTION|VERIFICATION.WRONG_CODE|SECURITY_REQUIREMENT\.)/;t.errorCodeFromErrorCodeString=e=>r.flatErrorCodes[e],t.canonizeString=e=>(e||"").toLowerCase().replace(/\s+/gm," ").trim(),t.errorCodeAndTypeFromMessage=(e,n)=>{if(n=t.canonizeString(n)){for(const o in r.flatErrorCodes){if(!r.flatErrorCodes.hasOwnProperty(o))continue;const i=e[o];if(i)for(const e of i)if(n.indexOf(t.canonizeString(e))>-1)return{errorCode:t.errorCodeFromErrorCodeString(o),errorType:t.errorTypeFromErrorCode(o)}}if(r.flatErrorCodes.hasOwnProperty(n))return{errorCode:t.errorCodeFromErrorCodeString(n),errorType:t.errorTypeFromErrorCode(n)}}return{errorCode:r.flatErrorCodes.RECIPE_ERROR,errorType:r.flatErrorCodes.RECIPE_ERROR}},t.errorTypeFromErrorCode=e=>e.match(o)?"userError":"recipeError"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.answeredPromptsReducer=(e=new Set,t)=>{switch(t.type){case"ADD_ANSWERED_PROMPT":return new Set([...e,t.userPromptId]);default:return e}},t.addAnsweredPrompt=(e,t)=>e.dispatch({type:"ADD_ANSWERED_PROMPT",path:"answeredPrompts",userPromptId:t}),t.isPromptAnswered=(e,t)=>e.getState().answeredPrompts.has(t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.progressReducer=(e=[],t)=>{switch(t.type){case"PROGRESS_APPEND":return[...e,t.progress];default:return e}},t.progressAppend=(e,t)=>e.dispatch({type:"PROGRESS_APPEND",progress:t,path:"progress"}),t.progressGetLast=e=>{const t=e.getState().progress;if(t.length)return t[t.length-1]}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__await||function(e){return this instanceof o?(this.v=e,this):new o(e)},i=this&&this.__asyncGenerator||function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),s=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){s.push([e,t,n,r])>1||c(e,t)}))})}function c(e,t){try{(n=i[e](t)).value instanceof o?Promise.resolve(n.value.v).then(u,l):f(s[0][2],n)}catch(e){f(s[0][3],e)}var n}function u(e){c("next",e)}function l(e){c("throw",e)}function f(e,t){e(t),s.shift(),s.length&&c(s[0][0],s[0][1])}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(7),a=n(16),c=n(70),u=n(25),l=n(0),f=n(1),h=n(26),p=n(35);t.flattenRecipeSteps=(e=[])=>{const n=e.reduce((e,t)=>e.concat(t.actions.map(e=>({action:e,step:t}))),[]),r=n.map(e=>e.action);return n.map((e,o)=>Object.assign(Object.assign({},e),{index:o,skipSelector:t.generateSkipSelectorForAction(r,o),total:n.length}))},t.generateSkipSelectorForAction=(e,t)=>{const n=[],r=[];let o=t;for(;e[o].optional&&o<e.length-1;)o++,"selector"in e[o]&&n.push(e[o].selector),"xPath"in e[o]&&r.push(e[o].xPath);return n.length||r.length?{selector:n.join(","),xPath:r.join("|")}:null},t.waitForRunnableResultOrTimeout=(e,t,n,o)=>r(void 0,void 0,void 0,(function*(){const r=l.kvGet(e.store,"config.action.scanTimeout"),i=l.kvGet(e.store,"config.randomizeSleep"),s=n.schema.timeout;if(void 0===s)return Object.assign(Object.assign({},n.schema),{error:"ActionTimeoutNotSetError"});let c,h=Date.now(),p=0;for(;p<s;){const s=yield n.runnable();if("status"===s.msgType)return s;if(!s.error)return s;if(c=s.error,t.skipSelector){if("SelectorNotFound"!==(yield a.actionWaitForSelector(e,{selector:t.skipSelector.selector,type:"exists",xPath:t.skipSelector.xPath})()).error)return s.message=s.error,s.error=void 0,s}const l=yield a.actionCheckForUserChallenge(e)();if("none"!==l.challengeDetails.type){const n=yield u.executeUserChallengeSteps(l.challengeDetails,e,o,t);if(n)return n;h=Date.now()}const d=yield a.scanOutputObjects(e);if(d)return d;p=Date.now()-h,yield f.sleep(r,i)}return Object.assign(Object.assign({},n.schema),{error:c})}));const d=["waitForSelector","click","set","kv","waitForEval","waitForFunction","waitForUrl"];t.transformRunnableResult=(e,n,o,i)=>r(void 0,void 0,void 0,(function*(){const r=i.schema;let a;if(p.executeActionTaps(n,o,"action",{detailsType:"action",action:i.schema}),a=d.indexOf(r.type)>-1?yield t.waitForRunnableResultOrTimeout(e,n,i,o):yield i.runnable(),"status"===a.msgType)return a;if(a.error)switch(r.onFail){case"pass":a.message=a.error,a.error=void 0;break;case"success":a=s.terminate(e,!0,"SUCCESS");break;case"error":default:const t="notImplemented"===a.type?` <action: ${a.details.type}>`:"";a=s.terminate(e,!1,`${a.error}${t}`,{action:f.filterProps(n.action,["value"]),index:n.index,step:n.step.step,total:n.total})}return a})),t.executeAction=(e,n,o)=>r(void 0,void 0,void 0,(function*(){if(p.executeActionTaps(n,o,"progress",{detailsType:"progress",label:"begin"}),"api"===n.action.type)return yield c.executeApiPwChange(e,o);const r=h.makeRunnableAction(e,n.action),i=yield t.transformRunnableResult(e,n,o,r);if("status"===i.msgType)return i;const s=yield a.actionCheckForUserChallenge(e)();if("none"!==s.challengeDetails.type){const t=yield u.executeUserChallengeSteps(s.challengeDetails,e,o,n);if(t)return t}const l=yield a.scanOutputObjects(e);return l||i})),t.makeRecipeReaderGenerator=function(e,n){return i(this,arguments,(function*(){const r=t.flattenRecipeSteps(e.recipeSchema.steps);for(const i of r){const r=yield o(t.executeAction(e,i,n));yield yield o({item:i,response:r})}}))}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=n(10),i=n(3),s=n(0);t.waitForNavigation=(e,t)=>r(void 0,void 0,void 0,(function*(){t=t||s.kvGet(e.store,"config.action.navigationTimeout");try{return yield e.engine.page.waitForNavigation({timeout:t,waitUntil:o.WaitUntilType.Domcontentloaded})}catch(e){return i.logger.log("[-] NavigationError, "+e.message),{success:!1}}}))},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=n(11),i=n(7),s=n(3);t.actionScanOutputObjects=(e,t)=>()=>r(void 0,void 0,void 0,(function*(){return e.engine.page.actionScanOutputObjects(t)})),t.scanOutputObjects=(e,n=1e3)=>r(void 0,void 0,void 0,(function*(){const r=e.flow?e.flow.outputObjects:void 0;if(!r||0===r.length)return void s.logger.error("[-] recipe without outputObjects");s.logger.debug("[i] outputObjects scan");const a=yield t.actionScanOutputObjects(e,{objects:r,timeout:n,type:"scanOutputObjects"})();if(!a||!a.object)return;const c=a.object.value?a.object.value:"NoOutputMessage";switch(a.object.action){case"error":return i.terminate(e,!1,c);case"success":return i.terminate(e,!0,c);default:throw new o.ApcError(`UnknownOutputObjectAction<${a.object.action}>`)}}))},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=n(3),i=n(15),s=n(14),a=n(20),c=n(1),u=n(16),l=n(29);function f(e,t){delete t.placeholders["%USER_PROMPT.ANSWER%"],[...e].forEach((e,n)=>delete t.placeholders[`%USER_PROMPT.ANSWER_${n+1}%`])}function h(e){return/text message| sms|sent to your number/i.test(e)?l.UserPromptCategory.SMS:/(security|authenticator|authentication) app|code generator/i.test(e)?l.UserPromptCategory.OTP:/e-?mail/i.test(e)?l.UserPromptCategory.EMAIL:l.UserPromptCategory.UNKNOWN}t.executeUserChallengeSteps=function(e,t,n,l){var p,d,g,y;return r(this,void 0,void 0,(function*(){switch(e.type){case"recaptcha":o.logger.log("[i] Captcha detected"),"undefined"!=typeof window&&(null===(d=(p=window).sendLog)||void 0===d||d.call(p,"[i] Captcha detected"));const r=yield t.engine.solveUserChallenge(e);r&&(yield t.engine.page.setRecaptchaToken({responseToken:r,sitekey:e.sitekey,type:"setRecaptchaToken"}));break;case"userPrompt":o.logger.log("[i] User prompt detected"),o.logger.log(e.hintText),"undefined"!=typeof window&&(null===(y=(g=window).sendLog)||void 0===y||y.call(g,"[i] User prompt detected"));const v=t.recipeSchema.userPrompts;if(!v)throw new Error("Unexpected exception: no userPrompt defined in the schema, but one was detected.");e.userPrompt=v[e.userPromptId],e.category=h(e.hintText);let m=null;const b=t.engine.solveUserChallenge(e).then(e=>m=e),w=s.kvGet(t.store,"config.action.scanTimeout");for(;null===m;){const n=yield u.scanOutputObjects(t);if(n)return o.logger.log("An error has been found, aborting the challenge"),t.engine.abortUserChallenge(e),n;if("userPrompt"!==(yield u.actionCheckForUserChallenge(t)()).challengeDetails.type)return o.logger.log("The userprompt selector disappeared, aborting the challenge"),void t.engine.abortUserChallenge(e);yield Promise.race([c.sleep(w),b])}a.addAnsweredPrompt(t.store,e.userPromptId),function(e,t){t.placeholders["%USER_PROMPT.ANSWER%"]=e,[...e].forEach((e,n)=>t.placeholders[`%USER_PROMPT.ANSWER_${n+1}%`]=e)}(m,t);for(const[r,o]of e.userPrompt.actions.entries()){const s=i.makeRunnableAction(t,o),a={action:o,index:l.index,runnable:s,skipSelector:i.generateSkipSelectorForAction(e.userPrompt.actions,r),step:l.step,total:l.total},c=yield i.transformRunnableResult(t,a,n,s);if("status"===c.msgType)return f(m,t),c.errorDetails&&(c.errorDetails.userPromptDetails={index:r,total:e.userPrompt.actions.length,userPromptIndex:e.userPromptId}),c;const h=yield u.scanOutputObjects(t);if(h)return h}f(m,t)}}))},t.detectCategory=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(13),o=n(11),i=n(34),s=n(27),a=n(16);t.getTimeoutForAction=e=>{if(void 0!==e.timeout)return e.timeout;switch(e.type){case"url":case"click":case"waitAndClick":return r.config.action.navigationTimeout;default:return r.config.action.timeout}},t.makeRunnableAction=(e,n)=>{switch(n.timeout=t.getTimeoutForAction(n),n.type){case"url":return{runnable:a.actionUrl(e,n),schema:n};case"set":return{runnable:a.actionSet(e,n),schema:n};case"click":case"waitAndClick":return{runnable:a.actionClick(e,n),schema:n};case"exists":case"waitForSelector":return{runnable:a.actionWaitForSelector(e,n),schema:n};case"eval":return{runnable:a.actionEval(e,n),schema:n};case"screenshot":return{runnable:a.actionScreenshot(e,n),schema:n};case"waitForEval":return{runnable:a.actionWaitForEval(e,n),schema:n};case"macro":return{runnable:a.actionMacro(e,n),schema:n};case"noop":case"wait":return{runnable:a.actionNoop(e,n),schema:n};case"hasOutput":return{runnable:a.actionHasOutput(e,n),schema:n};case"outputObjects":return{runnable:a.actionOutputObjects(e,Object.assign({},n)),schema:n};case"waitForUrl":return{runnable:a.actionWaitForUrl(e,Object.assign({},n)),schema:n};case"kv":return{runnable:a.actionKv(e,Object.assign({},n)),schema:n};case"fetch":return{runnable:a.actionFetch(e,Object.assign({},n)),schema:n};default:return{runnable:a.actionNotImplemented(e,n),schema:n}}},t.buildFlow=e=>{if(!e.recipeSchema)throw new o.ApcError("NoRecipeSchema");const t=i.outputObjectsFromRecipeSchema(e.recipeSchema),n=Object.keys(e.recipeSchema.errorCodes).map(t=>({[t]:e.recipeSchema.errorCodes[t].map(i.normalizeString)})).reduce((e,t)=>Object.assign(Object.assign({},e),t),{}),{urlBlackList:r}=s.getRecipeData(e.recipeSchema);return{errorCodes:n,outputObjects:t,urlBlackList:r}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extensionToRegexp=e=>new RegExp(`^.*?\\.${e}(\\?.*)?$`,"i"),t.metaResourcesList={kw_css:[t.extensionToRegexp("css")],kw_fonts:[t.extensionToRegexp("ttf"),t.extensionToRegexp("woff")],kw_images:[t.extensionToRegexp("png"),t.extensionToRegexp("jpg"),t.extensionToRegexp("jpeg"),t.extensionToRegexp("gif"),t.extensionToRegexp("svg"),t.extensionToRegexp("bmp"),t.extensionToRegexp("ico")],kw_inlined_images:[new RegExp("^data:")],kw_js:[t.extensionToRegexp("js")]};const r=e=>"string"==typeof e&&t.metaResourcesList[e]?t.metaResourcesList[e]:[new RegExp(e)],o={["Accept-Language".toLowerCase()]:"en-US,en-GB;q=0.9,en;q=0.8",["User-Agent".toLowerCase()]:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/88.0.4324.150 Safari/537.36"};t.getRecipeData=e=>{var t;const n=(null===(t=e.options)||void 0===t?void 0:t.httpHeaders)||{},i=Object.keys(n).filter(e=>n[e]).reduce((e,t)=>Object.assign(Object.assign({},e),{[t.toLowerCase()]:n[t]}),{});return{httpHeaders:Object.assign(Object.assign({},o),i),urlBlackList:(e.urlBlackList||[]).map(r).reduce((e,t)=>e.concat(t),[])}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errors={emptyMessage:"EmptyMessage",messageDecodeError:"MessageDecodeError",messageWithoutType:"MessageWithoutType",selectorNotFound:"SelectorNotFound",unknownError:"UnknownError",unknownMessageType:"UnknownMessageType"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EngineVersion="1.0.2",function(e){e.SMS="sms",e.EMAIL="email",e.OTP="otp",e.UNKNOWN="unknown"}(t.UserPromptCategory||(t.UserPromptCategory={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flatErrorCodes={ABORTED:"aborted","CAPTCHA.RESPONSE_DOES_NOT_MATCH":"responseDoesNotMatch","CAPTCHA.TIMEOUT":"captchaTimeout",IP_BLOCKED:"ipBlocked","LOGIN.ACCOUNT_LOCKED":"accountLocked","LOGIN.GENERIC_FAILURE":"loginFailed","LOGIN.NOT_FOUND":"loginNotFound","LOGIN.PASSWORD_INCORRECT":"passwordIncorrect",NEED_USER_ACTION:"needUserAction","SECURITY_REQUIREMENT.CAN_NOT_REUSE_PREVIOUS_PASSWORD":"canNotReusePreviousPassword","SECURITY_REQUIREMENT.CHARACTER_NOT_ALLOWED":"characterNotAllowed","SECURITY_REQUIREMENT.NO_SEQUENTIAL_CHARS":"noSequentialChars","SECURITY_REQUIREMENT.NOT_STRONG_ENOUGH":"notStrongEnough","SECURITY_REQUIREMENT.SPECIAL_CHARACTER_REQUIRED":"specialCharacterRequired","SECURITY_REQUIREMENT.TOO_LONG":"tooLong","SECURITY_REQUIREMENT.TOO_SHORT":"tooShort",UNKNOWN_ERROR:"unknownError",RECIPE_ERROR:"recipeError",UNSUPPORTED_LANGUAGE_COUNTRY:"unsupportedLanguageCountry","USER.ACCOUNT_NOT_VERIFIED":"userAccountNotVerified","USER.NEEDS_TO_ACCEPT_TOS":"userNeedsToAcceptTOS","USER.PROFILE_INCOMPLETE":"userProfileIncomplete","VERIFICATION.METHOD_VERIFICATION_FAIL":"methodVerificationFail","VERIFICATION.TIMEOUT":"verificationTimeout","VERIFICATION.UNKNOWN_VERIFICATION_ERROR":"unknownVerificationError","VERIFICATION.WRONG_CODE":"wrongCode",WEBSITE_UNAVAILABLE:"websiteUnavailable"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(18);t.fetchReducer=(e={},t)=>{var n;switch(t.type){case"FETCH_SET":if(!(null===(n=t.response)||void 0===n?void 0:n.requestId))throw new Error("NoRequestIdError");return Object.assign(Object.assign({},e),{[t.response.requestId]:t.response});case"FETCH_UNSET":if(!t.requestId)throw new Error("NoRequestIdError");return delete e[t.requestId],e;default:return e}},t.fetchHasRequestId=(e,t)=>Object.keys(e.getState().fetch).indexOf(t)>-1,t.fetchGet=(e,n)=>{if(!t.fetchHasRequestId(e,n))throw new r.KeyError(n);return e.getState().fetch[n]},t.fetchSet=(e,t)=>e.dispatch({type:"FETCH_SET",response:t,path:"fetch"}),t.fetchUnset=(e,t)=>e.dispatch({type:"FETCH_UNSET",requestId:t,path:"fetch"}),t.fetchUtils=e=>({get:n=>t.fetchGet(e,n),hasRequestId:n=>t.fetchHasRequestId(e,n),set:n=>t.fetchSet(e,n),unset:n=>t.fetchUnset(e,n)})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(6);t.convertOutputObjectArrayToDict=e=>{if(!(e instanceof Array))return e;const t=e,[n,o]=t,i=t[2];let s,a=[];return i&&("string"==typeof i?a=[i]:(a=[i[0]],i.length>1&&(s=i.slice(1).map(r.normalizeString)))),"urlMatches"===n&&(s=a,a=[]),{action:o,explicitMessage:t[3],matches:s,selectors:a,type:n}},t.outputObjectsFromRecipeSchema=e=>e.outputObjects.map(e=>t.convertOutputObjectArrayToDict(e))},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=n(3),i=n(0);t.actionScreenshot=(e,t)=>()=>r(void 0,void 0,void 0,(function*(){const n={type:t.type};if(!e.engine.page.screenshot)return n;try{const n=`${i.kvGet(e.store,"config.screenshot.path")}/${e.recipeSchema.site}-${t.path}`;yield e.engine.page.screenshot(Object.assign(Object.assign({},i.kvGetByPrefix(e.store,"config.screenshot")),{path:n}))}catch(e){o.logger.log("[-] screenshot fail "+e.message)}return n}))},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(16)),r(n(19)),r(n(32)),r(n(25)),r(n(71)),r(n(6))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(11);t.executeActionTapAction=(e,t,n,r)=>{n(e.step,e.action,r)},t.executeActionTapProgress=(e,t,n,r)=>{r=void 0!==r?r:{detailsType:"progress",label:"error"},n(e.step,e.action.type,r.label,e.index,e.total)},t.executeActionTapStatus=(e,t,n,o)=>{throw new r.ApcError("NotImplemented")},t.validateTapOptions=(e,t)=>{if(t){if(t.detailsType!==e)throw new r.ApcError("InvalidDetailsType");return t}},t.executeActionTaps=(e,n,o,i)=>{if(!n)return;const s=n[o];if(!s)return;let a;for(const n of s){switch(o){case"action":i=t.validateTapOptions(o,i),a=t.executeActionTapAction(e,o,n,i);break;case"progress":i=t.validateTapOptions(o,i),a=t.executeActionTapProgress(e,o,n,i);break;case"status":i=t.validateTapOptions(o,i),a=t.executeActionTapStatus(e,o,n,i);break;default:throw new r.ApcError("InvalidTapName")}if(void 0!==a)break}return a}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=n(7),i=n(3),s=n(27),a=n(24),c=n(33),u=n(0),l=n(21);t.progressTapLog=(e,t,n,r,o)=>i.logger.log(`[${String(r).padStart(2)} / ${String(o).padStart(2)}][${e.step}] ${t} - ${n}`),t.progressTapHelper=e=>(t,n,r,i,s)=>l.progressAppend(e.store,o.formatStep(e.recipeSchema,t)(r,i,s)),t.screenshotHelper=(e,t)=>r(void 0,void 0,void 0,(function*(){if(!u.kvGet(e.store,"config.debug"))return;const n=t.action,r=`${t.index.toString().padStart(2,"0")}-${t.total.toString().padStart(2,"0")}-${n.type}.png`;yield c.actionScreenshot(e,{type:"screenshot",path:r})()})),t.setBlackListHelper=(e,t)=>{e.engine.setBlackList&&(i.logger.debug("[i] setBlacklist",t),e.engine.setBlackList(t))},t.setHttpHeadersHelper=e=>{if(e.engine.setRequestHeader){const{httpHeaders:t}=s.getRecipeData(e.recipeSchema);for(const n of Object.keys(t))i.logger.debug(`[i] set request header, ${n}: ${t[n]}`),e.engine.setRequestHeader(n,t[n])}},t.stopBackgroundScanHelper=e=>r(void 0,void 0,void 0,(function*(){yield a.actionScanOutputObjects(e,{objects:[],type:"scanOutputObjects"})()}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(5);t.actionExists=e=>{const t=r.selectAllElements(e);if(!t||0===t.length)return Object.assign(Object.assign({},e),{error:"SelectorNotFound"});const n=r.cleanText(t.map(e=>r.getTextFromElement(e)).join(" "));return Object.assign(Object.assign({},e),{value:n})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.actionGetCurrentUrl=e=>Object.assign(Object.assign({},e),{currentUrl:document.location.href})},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(40)),r(n(37)),r(n(74)),r(n(75)),r(n(38)),r(n(76)),r(n(77)),r(n(78)),r(n(79)),r(n(80)),r(n(81))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(28),o=n(4),i=n(5);t.actionClick=e=>{const t=i.selectAllElements(e);return t&&0!==t.length?(t.length>1&&o.animatorLogger.log("[i] Warning<SelectorMatchMoreThanOneElement>"),t[0].click(),e):Object.assign(Object.assign({},e),{error:r.errors.selectorNotFound})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultSchemaVersion="0.2",function(e){e.NUMBER="number",e.CHARS="chars",e.WAIT="wait",e.ANY="any"}(t.UserPromptInputType||(t.UserPromptInputType={})),t.formatedRecipeProperties02=["authors","engines","createOn","notes","site","version","schemaVersion"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(29))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(44),o=n(20),i=n(31),s=n(0),a=n(21),c=n(12),u=r.combineReducers({answeredPrompts:o.answeredPromptsReducer,fetch:i.fetchReducer,kv:s.kvReducer,progress:a.progressReducer,status:c.statusReducer});t.storeCopyObject=(e,n,r=[])=>{Object.keys(n).forEach(o=>{const i=n[o];if(i&&"object"==typeof i)return t.storeCopyObject(e,i,[...r,o]);s.kvSet(e,[...r,o].join("."),i)})},t.storeCopyConfig=(e,n)=>{t.storeCopyObject(e,n,["config"])},t.createStore=e=>{const n=((e,...t)=>{const n=[],o=r.createStore((t,r)=>(r&&"@@init"!==r.type&&setTimeout(()=>n.forEach(e=>e(r)),0),e(t,r)),...t);return Object.assign(Object.assign({},o),{subscribe:e=>(n.push(e),()=>n.splice(n.indexOf(e)))})})(u);return e&&t.storeCopyConfig(n,e),n}},function(e,t,n){const r=n(45),o=n(46),i=n(47),s=n(48),a=n(49);e.exports={applyMiddleware:r,combineReducers:o,createStore:i,withMiddleware:s,withSubscribe:a}},function(e,t){e.exports=(...e)=>t=>(...n)=>{const r=t(...n),o=e.reduceRight((e,t)=>t(r)(e),r.dispatch);return Object.assign({},r,{dispatch:o})}},function(e,t){e.exports=e=>(t={},n)=>Object.keys(e).reduce((r,o)=>Object.assign(r,{[o]:e[o](t[o],n)}),{})},function(e,t){e.exports=(e,t=e(void 0,{type:"@@init"}))=>({dispatch:n=>(t=e(t,n),n),getState:()=>t})},function(e,t){e.exports=e=>(t,n,r)=>r(e)(t,n)},function(e,t){e.exports=e=>(t,...n)=>{const r=[],o=e((e,n)=>(n&&"@@init"!=n.type&&setTimeout(()=>r.forEach(e=>e()),0),t(e,n)),...n);return Object.assign({},o,{subscribe:e=>(r.push(e),()=>r.splice(r.indexOf(e)))})}},function(e,t,n){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=n(51),o=n(52),i=n(53);function s(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,n){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return f(this,e)}return u(this,e,t,n)}function u(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=h(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|d(t,n),o=(e=a(e,r)).write(t,n);o!==r&&(e=e.slice(0,o));return e}(e,t,n):function(e,t){if(c.isBuffer(t)){var n=0|p(t.length);return 0===(e=a(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?a(e,0):h(e,t);if("Buffer"===t.type&&i(t.data))return h(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function f(e,t){if(l(t),e=a(e,t<0?0:0|p(t)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function h(e,t){var n=t.length<0?0:0|p(t.length);e=a(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function p(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function d(e,t){if(c.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return B(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return H(e).length;default:if(r)return B(e).length;t=(""+t).toLowerCase(),r=!0}}function g(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return k(this,t,n);case"utf8":case"utf-8":return P(this,t,n);case"ascii":return R(this,t,n);case"latin1":case"binary":return T(this,t,n);case"base64":return S(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function y(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function v(e,t,n,r,o){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof t&&(t=c.from(t,r)),c.isBuffer(t))return 0===t.length?-1:m(e,t,n,r,o);if("number"==typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):m(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function m(e,t,n,r,o){var i,s=1,a=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,a/=2,c/=2,n/=2}function u(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(o){var l=-1;for(i=n;i<a;i++)if(u(e,i)===u(t,-1===l?0:i-l)){if(-1===l&&(l=i),i-l+1===c)return l*s}else-1!==l&&(i-=i-l),l=-1}else for(n+c>a&&(n=a-c),i=n;i>=0;i--){for(var f=!0,h=0;h<c;h++)if(u(e,i+h)!==u(t,h)){f=!1;break}if(f)return i}return-1}function b(e,t,n,r){n=Number(n)||0;var o=e.length-n;r?(r=Number(r))>o&&(r=o):r=o;var i=t.length;if(i%2!=0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var s=0;s<r;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[n+s]=a}return s}function w(e,t,n,r){return q(B(t,e.length-n),e,n,r)}function O(e,t,n,r){return q(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function _(e,t,n,r){return O(e,t,n,r)}function E(e,t,n,r){return q(H(t),e,n,r)}function j(e,t,n,r){return q(function(e,t){for(var n,r,o,i=[],s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),r=n>>8,o=n%256,i.push(o),i.push(r);return i}(t,e.length-n),e,n,r)}function S(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function P(e,t,n){n=Math.min(e.length,n);for(var r=[],o=t;o<n;){var i,s,a,c,u=e[o],l=null,f=u>239?4:u>223?3:u>191?2:1;if(o+f<=n)switch(f){case 1:u<128&&(l=u);break;case 2:128==(192&(i=e[o+1]))&&(c=(31&u)<<6|63&i)>127&&(l=c);break;case 3:i=e[o+1],s=e[o+2],128==(192&i)&&128==(192&s)&&(c=(15&u)<<12|(63&i)<<6|63&s)>2047&&(c<55296||c>57343)&&(l=c);break;case 4:i=e[o+1],s=e[o+2],a=e[o+3],128==(192&i)&&128==(192&s)&&128==(192&a)&&(c=(15&u)<<18|(63&i)<<12|(63&s)<<6|63&a)>65535&&c<1114112&&(l=c)}null===l?(l=65533,f=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),o+=f}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=4096));return n}(r)}t.Buffer=c,t.SlowBuffer=function(e){+e!=e&&(e=0);return c.alloc(+e)},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=s(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,n){return u(null,e,t,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,n){return function(e,t,n,r){return l(t),t<=0?a(e,t):void 0!==n?"string"==typeof r?a(e,t).fill(n,r):a(e,t).fill(n):a(e,t)}(null,e,t,n)},c.allocUnsafe=function(e){return f(null,e)},c.allocUnsafeSlow=function(e){return f(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,o=0,i=Math.min(n,r);o<i;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!i(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=c.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var s=e[n];if(!c.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,o),o+=s.length}return r},c.byteLength=d,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)y(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?P(this,0,e):g.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,n,r,o){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),t<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&t>=n)return 0;if(r>=o)return-1;if(t>=n)return 1;if(this===e)return 0;for(var i=(o>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),a=Math.min(i,s),u=this.slice(r,o),l=e.slice(t,n),f=0;f<a;++f)if(u[f]!==l[f]){i=u[f],s=l[f];break}return i<s?-1:s<i?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return v(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return v(this,e,t,n,!1)},c.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return b(this,e,t,n);case"utf8":case"utf-8":return w(this,e,t,n);case"ascii":return O(this,e,t,n);case"latin1":case"binary":return _(this,e,t,n);case"base64":return E(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function R(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}function T(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}function k(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=t;i<n;++i)o+=D(e[i]);return o}function A(e,t,n){for(var r=e.slice(t,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function C(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function x(e,t,n,r,o,i){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function I(e,t,n,r){t<0&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-n,2);o<i;++o)e[n+o]=(t&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function M(e,t,n,r){t<0&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-n,4);o<i;++o)e[n+o]=t>>>8*(r?o:3-o)&255}function U(e,t,n,r,o,i){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function N(e,t,n,r,i){return i||U(e,0,n,4),o.write(e,t,n,r,23,4),n+4}function L(e,t,n,r,i){return i||U(e,0,n,8),o.write(e,t,n,r,52,8),n+8}c.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=c.prototype;else{var o=t-e;n=new c(o,void 0);for(var i=0;i<o;++i)n[i]=this[i+e]}return n},c.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||C(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r},c.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||C(e,t,this.length);for(var r=this[e+--t],o=1;t>0&&(o*=256);)r+=this[e+--t]*o;return r},c.prototype.readUInt8=function(e,t){return t||C(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||C(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||C(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||C(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||C(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||C(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*t)),r},c.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||C(e,t,this.length);for(var r=t,o=1,i=this[e+--r];r>0&&(o*=256);)i+=this[e+--r]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*t)),i},c.prototype.readInt8=function(e,t){return t||C(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||C(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){t||C(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return t||C(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||C(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||C(e,4,this.length),o.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||C(e,4,this.length),o.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||C(e,8,this.length),o.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||C(e,8,this.length),o.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||x(this,e,t,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[t]=255&e;++i<n&&(o*=256);)this[t+i]=e/o&255;return t+n},c.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||x(this,e,t,n,Math.pow(2,8*n)-1,0);var o=n-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+n},c.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||x(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||x(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):I(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||x(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):I(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||x(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):M(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||x(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):M(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);x(this,e,t,n,o-1,-o)}var i=0,s=1,a=0;for(this[t]=255&e;++i<n&&(s*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+n},c.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);x(this,e,t,n,o-1,-o)}var i=n-1,s=1,a=0;for(this[t+i]=255&e;--i>=0&&(s*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||x(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||x(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):I(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||x(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):I(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||x(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):M(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||x(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):M(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,n){return N(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return N(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return L(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return L(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var o,i=r-n;if(this===e&&n<t&&t<r)for(o=i-1;o>=0;--o)e[o+t]=this[o+n];else if(i<1e3||!c.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+i),t);return i},c.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{var s=c.isBuffer(e)?e:B(new c(e,r).toString()),a=s.length;for(i=0;i<n-t;++i)this[i+t]=s[i%a]}return this};var F=/[^+\/0-9A-Za-z-_]/g;function D(e){return e<16?"0"+e.toString(16):e.toString(16)}function B(e,t){var n;t=t||1/0;for(var r=e.length,o=null,i=[],s=0;s<r;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function H(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(F,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function q(e,t,n,r){for(var o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}}).call(this,n(17))},function(e,t,n){"use strict";t.byteLength=function(e){var t=u(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=u(e),s=r[0],a=r[1],c=new i(function(e,t,n){return 3*(t+n)/4-n}(0,s,a)),l=0,f=a>0?s-4:s;for(n=0;n<f;n+=4)t=o[e.charCodeAt(n)]<<18|o[e.charCodeAt(n+1)]<<12|o[e.charCodeAt(n+2)]<<6|o[e.charCodeAt(n+3)],c[l++]=t>>16&255,c[l++]=t>>8&255,c[l++]=255&t;2===a&&(t=o[e.charCodeAt(n)]<<2|o[e.charCodeAt(n+1)]>>4,c[l++]=255&t);1===a&&(t=o[e.charCodeAt(n)]<<10|o[e.charCodeAt(n+1)]<<4|o[e.charCodeAt(n+2)]>>2,c[l++]=t>>8&255,c[l++]=255&t);return c},t.fromByteArray=function(e){for(var t,n=e.length,o=n%3,i=[],s=0,a=n-o;s<a;s+=16383)i.push(l(e,s,s+16383>a?a:s+16383));1===o?(t=e[n-1],i.push(r[t>>2]+r[t<<4&63]+"==")):2===o&&(t=(e[n-2]<<8)+e[n-1],i.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return i.join("")};for(var r=[],o=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,c=s.length;a<c;++a)r[a]=s[a],o[s.charCodeAt(a)]=a;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,n){for(var o,i,s=[],a=t;a<n;a+=3)o=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(r[(i=o)>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return s.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,o){var i,s,a=8*o-r-1,c=(1<<a)-1,u=c>>1,l=-7,f=n?o-1:0,h=n?-1:1,p=e[t+f];for(f+=h,i=p&(1<<-l)-1,p>>=-l,l+=a;l>0;i=256*i+e[t+f],f+=h,l-=8);for(s=i&(1<<-l)-1,i>>=-l,l+=r;l>0;s=256*s+e[t+f],f+=h,l-=8);if(0===i)i=1-u;else{if(i===c)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,r),i-=u}return(p?-1:1)*s*Math.pow(2,i-r)},t.write=function(e,t,n,r,o,i){var s,a,c,u=8*i-o-1,l=(1<<u)-1,f=l>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:i-1,d=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),(t+=s+f>=1?h/c:h*Math.pow(2,1-f))*c>=2&&(s++,c/=2),s+f>=l?(a=0,s=l):s+f>=1?(a=(t*c-1)*Math.pow(2,o),s+=f):(a=t*Math.pow(2,f-1)*Math.pow(2,o),s=0));o>=8;e[n+p]=255&a,p+=d,a/=256,o-=8);for(s=s<<o|a,u+=o;u>0;e[n+p]=255&s,p+=d,s/=256,u-=8);e[n+p-d]|=128*g}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=n(13),i=n(3),s=n(15),a=n(19),c=n(6),u=n(14),l=n(0),f=n(12),h=n(1);t.makeReaderContext=(e,t,n,r)=>({engine:e,placeholders:c.makePlaceholders(n),recipeSchema:t,store:r||u.createStore()}),t.changePassword=(e,n,c,p,d,g={})=>r(void 0,void 0,void 0,(function*(){const r=t.makeReaderContext(e,n,p,d);u.storeCopyConfig(r.store,Object.assign(Object.assign({},o.config),c));const y=l.kvGet(r.store,"config.globalTimeout"),v=new h.DeathClock(y);v.addHandler(()=>f.statusSetErrorWithReaderContext(r,"GlobalTimeout")),v.start(),i.logger.log(`[i] change password (version: ${l.kvGet(r.store,"config.engineVersion")})`);const m=yield s.changePasswordCore(r,g);if(v.stop(!1),!m.success){const e=a.errorCodeAndTypeFromMessage(n.errorCodes,m.error);f.statusSet(r.store,Object.assign(Object.assign({},m),e))}return r}))},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=n(14),i=n(23);t.actionClick=(e,t)=>()=>r(void 0,void 0,void 0,(function*(){const n=Object.assign({},t),r=yield e.engine.page.waitForSelector(Object.assign(Object.assign({},t),{type:"exists"}));if(r.error)return Object.assign(Object.assign({},n),{error:r.error});try{yield e.engine.page.click(t)}catch(e){return Object.assign(Object.assign({},n),{error:e})}return yield i.waitForNavigation(e,o.kvGet(e.store,"config.action.scanTimeout")),n}))},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=n(6),i=n(23);t.actionEval=(e,t)=>()=>r(void 0,void 0,void 0,(function*(){const n={type:"eval"},r=o.replacePlaceholders(o.cleanEvalString(t.code),e.placeholders,e.store),s=yield e.engine.page.evaluate(Object.assign(Object.assign({},t),{code:r}));return s.error?Object.assign(Object.assign({},n),{error:s.error}):(n.result=s.result,yield i.waitForNavigation(e),n)}))},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),i=n(1),s=n(24);t.actionHasOutput=(e,t)=>()=>r(void 0,void 0,void 0,(function*(){const n={type:t.type};if(!e.flow)return Object.assign(Object.assign({},n),{error:"ReaderContextMissingFlow"});const r=o.kvGet(e.store,"config.action.scanTimeout"),a=o.kvGet(e.store,"config.randomizeSleep"),c=void 0!==t.timeout?t.timeout:o.kvGet(e.store,"config.action.timeout"),u=Date.now();let l=0;for(;l<c;){const n=yield s.scanOutputObjects(e,c);if(n)return n.error&&"success"===t.onFail&&(n.message=n.error,n.error=void 0,n.success=!0),n;yield i.sleep(r,a),l=Date.now()-u}return Object.assign(Object.assign({},n),{error:"Timeout"})}))},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),i=n(1),s=n(6);t.actionFetch=(e,t)=>()=>r(void 0,void 0,void 0,(function*(){const n={type:t.type};if(!e.engine.page.fetch)return Object.assign(Object.assign({},n),{error:"NotImplementedFetchError"});const r={data:void 0,expect:{statusCode:200},headers:{},method:"GET",mode:"no-cors",type:"fetch"},a=void 0!==(t=Object.assign(Object.assign({},r),t)).timeout?t.timeout:o.kvGet(e.store,"config.action.timeout"),c=Date.now();t.headers=s.replacePlaceholderInObject(e,t.headers),t.data=s.replacePlaceholderInObject(e,t.data);const u=yield e.engine.page.fetch(t);if(u.error)return Object.assign(Object.assign({},n),{error:u.error});let l=0;for(;l<a;){let r;l=Date.now()-c;try{r=yield e.engine.page.fetch({requestId:u.requestId,type:t.type})}catch(e){return Object.assign(Object.assign({},n),{error:e.message})}if(r.error)return Object.assign(Object.assign({},n),{error:r.error});if("done"===r.requestStatus)return Object.assign(Object.assign({},n),{response:r.response});yield i.sleep(o.kvGet(e.store,"config.action.scanTimeout"),o.kvGet(e.store,"config.randomizeSleep"))}return Object.assign(Object.assign({},n),{error:"FetchTimeout"})}))},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=n(3),i=n(0);t.actionKv=(e,n)=>()=>r(void 0,void 0,void 0,(function*(){return o.logger.log(`[i] kv (${n.selector?"html":"cookie"}), key: ${n.key}`),n.selector?yield t.helperActionKvHtml(e,n):n.cookie?yield t.helperActionKvCookie(e,n):{error:"UnknownActionKv",type:n.type}})),t.helperActionKvHtml=(e,t)=>r(void 0,void 0,void 0,(function*(){const n={type:t.type},r=yield e.engine.page.waitForSelector(Object.assign(Object.assign({},t),{type:"exists"}));return r.error?Object.assign(Object.assign({},n),{error:r.error}):(i.kvSet(e.store,t.key,r.value),n)})),t.helperActionKvCookie=(e,t)=>r(void 0,void 0,void 0,(function*(){const n={type:t.type},r=(yield e.engine.page.cookies({type:"getCookies"})).cookies.find(e=>e.name===t.cookie);return r?(i.kvSet(e.store,t.key,r.value),n):Object.assign(Object.assign({},n),{error:`CookieNotFoundError<${t.cookie}>`})}))},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=n(22);t.actionMacro=(e,t)=>()=>r(void 0,void 0,void 0,(function*(){const n={name:t.name,type:"macro"};if(!e.recipeSchema.macros)return Object.assign(Object.assign({},t),{error:"NoMacrosFieldInRecipeSchema"});if(!(t.name in e.recipeSchema.macros))return Object.assign(Object.assign({},t),{error:"UnknownMacroName"});const r=e.recipeSchema.macros[t.name],i=o.flattenRecipeSteps([r]);for(const t of i){const i=yield o.executeAction(e,t,{});if("status"===i.msgType)return!i.success&&r.options&&"pass"===r.options.onFail?n:i}return n}))},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.actionNotImplemented=(e,t)=>()=>r(void 0,void 0,void 0,(function*(){return{details:t,error:"NotImplementedActionError",type:"notImplemented"}}))},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=n(1);t.actionNoop=(e,t)=>()=>r(void 0,void 0,void 0,(function*(){return t.timeout&&t.timeout>0&&(yield o.sleep(t.timeout)),t}))},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=n(32);t.actionOutputObjects=(e,t)=>()=>r(void 0,void 0,void 0,(function*(){const n={type:t.type};if(!e.flow)return Object.assign(Object.assign({},n),{error:"MissingFlowError"});for(const n of t.objects)if(n instanceof Array){const t=o.convertOutputObjectArrayToDict(n);e.flow.outputObjects.push(t)}else e.flow.outputObjects.push(n);return n}))},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=n(20);t.actionCheckForUserChallenge=e=>()=>r(void 0,void 0,void 0,(function*(){return e.engine.page.checkForUserChallenge({type:"checkForUserChallenge",userPromptOptions:(e.recipeSchema.userPrompts||[]).filter((t,n)=>!o.isPromptAnswered(e.store,n))})}))},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=n(0),i=n(1),s=n(6);t.actionSet=(e,t)=>()=>r(void 0,void 0,void 0,(function*(){const n=i.filterProps(t,["value"]);t.value=s.replacePlaceholders(t.value,e.placeholders);const r=yield e.engine.page.waitForSelector(Object.assign(Object.assign({},n),{type:"exists"}));if(r.error)return Object.assign(Object.assign({},n),{error:r.error});const a=o.kvGet(e.store,"config.action.typingDelay");return yield e.engine.page.type(Object.assign(Object.assign({},t),{delay:a}))}))},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.actionUrl=(e,t)=>()=>r(void 0,void 0,void 0,(function*(){return yield e.engine.page.goto(t)}))},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=n(6);t.actionWaitForEval=(e,t)=>()=>r(void 0,void 0,void 0,(function*(){const n={type:t.type},r=o.replacePlaceholders(o.cleanEvalString(t.code),e.placeholders),i=yield e.engine.page.waitForFunction(Object.assign(Object.assign({},t),{type:"waitForFunction",code:r}));return i.error?Object.assign(Object.assign({},n),{error:i.error}):n}))},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.actionWaitForSelector=(e,t)=>()=>r(void 0,void 0,void 0,(function*(){const n={selector:t.selector,type:t.type},r=yield e.engine.page.waitForSelector(Object.assign(Object.assign({},t),{type:"exists"}));return r.error?Object.assign(Object.assign({},n),{error:r.error}):n}))},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.actionWaitForUrl=(e,t)=>()=>r(void 0,void 0,void 0,(function*(){const n={type:t.type},r=yield e.engine.page.getCurrentUrl({type:"getCurrentUrl"});return r.currentUrl.indexOf(t.match)>-1?Object.assign(Object.assign({},n),{url:r.currentUrl}):Object.assign(Object.assign({},n),{error:"UrlNotFound"})}))},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=n(7),i=n(10),s=n(3),a=n(15),c=n(25);function u(e){if("string"==typeof e)try{return JSON.parse(e)}catch(t){throw new Error("The website answer is not a valid JSON: "+e)}return e}function l(e,t){var n,r;s.logger.log("[i] Captcha detected"),"undefined"!=typeof window&&(null===(r=(n=window).sendLog)||void 0===r||r.call(n,"[i] Captcha detected"));const o=t.domain||e.recipeSchema.site,i=new URL("https://"+o).origin;return e.engine.solveUserChallenge({origin:i,sitekey:t.sitekey,type:"recaptcha"})}function f(e,t){var n,r;let o;s.logger.log("[i] User prompt detected"),s.logger.log(JSON.stringify(t)),"undefined"!=typeof window&&(null===(r=(n=window).sendLog)||void 0===r||r.call(n,"[i] User prompt detected")),o=t.category&&Object.keys(i.UserPromptCategory).includes(t.category)?i.UserPromptCategory[t.category]:c.detectCategory(t.hintText);const a={ANY:i.UserPromptInputType.ANY,DIGITS:i.UserPromptInputType.NUMBER,LETTERS:i.UserPromptInputType.CHARS}[t.inputType||"ANY"]||i.UserPromptInputType.ANY;return e.engine.solveUserChallenge({category:o,hintText:t.hintText,type:"userPrompt",userPrompt:{actions:[],hint:"pc-api",inputType:a,length:Number(t.inputLength)||void 0,selector:"pc-api"},userPromptId:0})}function h(e,t,n,o,i){return r(this,void 0,void 0,(function*(){const r=a.makeRunnableAction(e,n),s={action:n,index:o,runnable:r,skipSelector:null,step:{step:"login",actions:[]},total:i};return yield a.transformRunnableResult(e,s,t,r)}))}function p(e){return r(this,void 0,void 0,(function*(){if("undefined"==typeof self)throw new Error("sha256/allowList is not supported in this platform yet");if(crypto.subtle){const t=yield crypto.subtle.digest("SHA-256",(new TextEncoder).encode(e));return Array.from(new Uint8Array(t)).map(e=>(e<16?"0":"")+e.toString(16)).join("")}throw new Error("SubtleCrypto is not available on this browser")}))}t.executeApiPwChange=function(e,t){var n,i,s,a;return r(this,void 0,void 0,(function*(){const r=yield h(e,t,{type:"url",src:"https://"+e.recipeSchema.site},0,3);if("status"===r.msgType)return r;const c=yield h(e,t,{method:"GET",type:"fetch",url:`https://${e.recipeSchema.site}/.well-known/password-changer`},1,3);if("status"===c.msgType)return c;const d=u(c.response);if(!function(e){if("object"!=typeof e||null===e)return!1;if(e.version&&"string"!=typeof e.version)return!1;if(e.passwordRequirements&&"object"!=typeof e.passwordRequirements)return!1;if(!Array.isArray(e.endpoints))return!1;return e.endpoints.every(e=>(!e.auth||"Form"===e.auth)&&("string"==typeof e.url&&(!(e.allowList&&!Array.isArray(e.allowList))&&(e.allowList||[]).every(e=>"string"==typeof e))))}(d))return o.terminate(e,!1,"The manifest is not valid: please check its format");let g=d.endpoints[d.endpoints.length-1];if(g.allowList){const t=yield p(e.placeholders["%JOB.EMAIL%"]),n=d.endpoints.filter(e=>!e.allowList||e.allowList.includes(t));if(0===n.length)return o.terminate(e,!1,"This user has no allowed endpoint");g=n[n.length-1]}try{if("https:"!==new URL(g.url).protocol)return o.terminate(e,!1,"The endpoint is not an https url: "+g.url)}catch(t){if("TypeError"===t.name)return o.terminate(e,!1,"The endpoint is not a valid URL: "+g.url);throw t}let y=null,v=null;for("string"==typeof(null===(n=d.reCaptchaVerification)||void 0===n?void 0:n.sitekey)?(y=yield l(e,d.reCaptchaVerification),v=d.reCaptchaVerification.responseKey||null):"string"==typeof(null===(i=d["2faVerification"])||void 0===i?void 0:i.hintText)&&(y=yield f(e,d["2faVerification"]),v=d["2faVerification"].responseKey||null);;){const n=yield h(e,t,{data:Object.assign(Object.assign({login:"%JOB.LOGIN%",newPassword:"%JOB.NEWPASS%",password:"%JOB.PASS%"},y?{verificationResponse:y}:{}),v?{verificationResponseKey:v}:{}),headers:{"content-type":"application/x-www-form-urlencoded"},method:"POST",type:"fetch",url:d.endpoints[0].url},2,3);if("status"===n.msgType)return n;const r=u(n.response);if(y=null,"NEED_VERIFICATION"!==r.status)return o.terminate(e,"OK"===r.status,r.status);if("2FA"===r.verificationType){if("string"!=typeof(null===(s=r["2faVerification"])||void 0===s?void 0:s.hintText))return o.terminate(e,!1,"The endpoint did not return any 2fa hint text");y=yield f(e,r["2faVerification"]),v=r["2faVerification"].responseKey||null}else if("RECAPTCHA_V2"===r.verificationType){if("string"!=typeof(null===(a=r.reCaptchaVerification)||void 0===a?void 0:a.sitekey))return o.terminate(e,!1,"The endpoint did not return any recaptcha sitekey");y=yield l(e,r.reCaptchaVerification),v=r.reCaptchaVerification.responseKey||null}}}))},t.solveRecaptchaChallenge=l,t.solve2faChallenge=f,t.sha256=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stepsOrder=["start","signin","logged","change","end"],t.mandatorySteps=["signin","logged","change"]},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,o){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,o,(t=e[n](t)).done,t.value)}))}}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(7),s=n(12),a=n(22),c=n(36),u=n(26);t.changePasswordCore=(e,t={})=>r(void 0,void 0,void 0,(function*(){var n,r;e.flow=u.buildFlow(e),c.setBlackListHelper(e,e.flow.urlBlackList),c.setHttpHeadersHelper(e),e.engine.postContextInit&&(yield e.engine.postContextInit(e));const l=s.statusUtils(e.store),f=a.makeRecipeReaderGenerator(e,Object.assign({progress:[c.progressTapHelper(e)]},t));let h;try{for(var p,d=o(f);!(p=yield d.next()).done;){const t=p.value;if(yield c.screenshotHelper(e,t.item),"status"===t.response.msgType&&l.set(t.response),l.isSet())break;h=t.response}}catch(e){n={error:e}}finally{try{p&&!p.done&&(r=d.return)&&(yield r.call(d))}finally{if(n)throw n.error}}return yield c.stopBackgroundScanHelper(e),l.isSet()?l.get():h?h.error?i.terminate(e,!1,h.error):i.terminate(e,!1,"NoSuccess"):i.terminate(e,!1,"NoLastActionResponseError")}))},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=n(1);t.makeBridgedPage=e=>{const t=()=>t=>r(void 0,void 0,void 0,(function*(){const n=JSON.stringify(t),r=yield e.sendMessage(n);return JSON.parse(o.b64DecodeUnicode(r))}));return{goto:e.goto,screenshot:e.screenshot,waitForNavigation:e.waitForNavigation,cookies:t(),actionScanOutputObjects:t(),checkForUserChallenge:t(),setRecaptchaToken:t(),click:t(),evaluate:t(),getCurrentUrl:t(),type:t(),waitForFunction:t(),waitForSelector:t(),fetch:t()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.actionEval=e=>{let t;try{t=Function(e.code)()}catch(t){return Object.assign(Object.assign({},e),{error:t.message})}return Object.assign(Object.assign({},e),{result:t})}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=n(9),i=n(4),s=o.createStore(),a=o.fetchUtils(s);t.actionFetch=e=>e.requestId?c(e):f(e);const c=e=>{if(!e.requestId)return{type:e.type,requestStatus:"error",error:"MissingRequestId"};const t=a.get(e.requestId);return t||{type:e.type,requestId:e.requestId,requestStatus:"pending"}};let u=0;const l=e=>{if(e instanceof Headers){let t="";return e.forEach((e,n)=>{"content-type"===n.toLowerCase()&&(t=e)}),t}return Object.keys(e).filter(e=>"content-type"===e.toLowerCase()).map(t=>e[t].toLowerCase())[0]},f=e=>{const t="fetch-request-"+u++,n={cache:"no-cache",credentials:"same-origin",headers:e.headers,method:e.method,mode:e.mode?e.mode:"cors",redirect:"follow"},{data:o}=(e=>{if("GET"===e.method)return{contentType:"",data:void 0};const t=e.headers?e.headers:{},n=e.data?e.data:{},r=l(t);switch(r){case"application/x-www-form-urlencoded":return{contentType:r,data:(o=n,Object.keys(o).map(e=>encodeURIComponent(e)+"="+encodeURIComponent(o[e]).replace("%20","+")).join("&"))};case"multipart/form-data":const t=new FormData;return Object.keys(n).forEach(e=>t.append(e,n[e])),{contentType:r,data:t};case"application/json":return{contentType:r,data:JSON.stringify(e.data)}}var o;throw new Error("MakeFetchBodyError")})(e);return o&&(n.body=o),i.animatorLogger.log(`[i] fetch requestId: ${t}, ${e.url}, mode: ${n.mode}, method: ${n.method}, redirect: ${n.redirect}`),fetch(e.url,n).then(n=>r(void 0,void 0,void 0,(function*(){const r={type:"fetch",requestId:t,requestStatus:"error"},o=e.expect?e.expect:{statusCode:200},s=l(n.headers);switch((e=>e.startsWith("application/json")?"application/json":e)(s)){case"application/json":r.response=yield n.json();break;default:r.response=yield n.text()}if(n.status!==o.statusCode){const t=((e,t,n,r)=>{let o="";return r.startsWith("application/json")&&(o=((e,t,n)=>e.errors&&e.errors.json?((e,t)=>{for(const n of t){let t=e;if(n.split(".").forEach(e=>{t=t[e]}),t)return t}return""})(n.response,e.errors.json):"")(e,0,n)),o=o||`HttpError<${t.status}, ${t.statusText}>`,o})(e,n,r,s);return a.set(Object.assign(Object.assign({},r),{error:t}))}i.animatorLogger.log(`[i] fetch requestId: ${t}, status: ${n.status} (done)`),a.set(Object.assign(Object.assign({},r),{requestStatus:"done"}))}))).catch(e=>{a.set({requestId:t,type:"fetch",error:e})}),a.set({requestId:t,type:"fetch",requestStatus:"pending"}),a.get(t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(5);t.actionGetCookies=e=>({type:e.type,cookies:r.getCookies()})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(9),o=n(4),i=n(37),s=n(38),a={outputObjects:[]};let c;const u=e=>{o.animatorLogger.log("[i] testOutputObjectHelperExistsWithXpath: "+JSON.stringify(e));const t=e.xPaths?e.xPaths:[],n={action:e.action,type:e.type,xPath:""};for(const s of t){n.xPath=s;const t=i.actionExists({type:"exists",xPath:s});if(!t||t.error)continue;let a=r.normalizeString(t.value);if(!a){if(!e.explicitMessage){o.animatorLogger.log("[!] exists match without value");continue}a=e.explicitMessage}if(e.type.endsWith("Matches")){if(""===a)continue;if(!e.matches)throw new r.ApcError("OutputObjectWithEmptyMatch");let t=!1;for(const n of e.matches)if(-1!==a.indexOf(n)){t=!0;break}if(!t)continue}return Object.assign(Object.assign({},n),{value:a})}},l=e=>{const t=e.selectors?e.selectors:[],n={action:e.action,selector:"",type:e.type};for(const s of t){n.selector=s;const t=i.actionExists({type:"exists",selector:s});if(!t||t.error)continue;let a=r.normalizeString(t.value);if(!a){if(!e.explicitMessage){o.animatorLogger.log("[!] exists match without value");continue}a=e.explicitMessage}if(e.type.endsWith("Matches")){if(""===a)continue;if(!e.matches)throw new r.ApcError("OutputObjectWithEmptyMatch");let t=!1;for(const n of e.matches)if(-1!==a.indexOf(n)){t=!0;break}if(!t)continue}return Object.assign(Object.assign({},n),{value:a})}},f=e=>{switch(e.type){case"visible":case"exists":case"visibleAndMatches":case"existsAndMatches":return(e=>e.selectors?l(e):e.xPaths?u(e):void o.animatorLogger.log("[-] UnknownOutputObject: "+JSON.stringify(e)))(e);case"urlMatches":return(e=>{if(!e.matches||0===e.matches.length)return void o.animatorLogger.log("[-] UrlMatches without matches properties");const t=s.actionGetCurrentUrl({type:"getCurrentUrl"}).currentUrl;for(const n of e.matches)if(t.indexOf(n)>-1)return{action:e.action,selector:n,type:e.type,value:e.explicitMessage}})(e);default:throw new r.ApcError(`OutputObjectTypeError<${e.type}>`)}},h=()=>{if(r.globalWindow.clearTimeout(c),c=0,void 0===a.outputObjects)return;const e=(e=>{o.animatorLogger.log("[i] run background scan");for(const t of e){const e=f(t);if(e)return e}})(a.outputObjects);e?a.response=e:c=r.globalWindow.setTimeout(h,1e3)};t.actionScanOutputObjects=e=>{const t={type:"scanOutputObjects"};return e.objects&&0!==e.objects.length?a.response?Object.assign(Object.assign({},t),{object:a.response}):(a.outputObjects=e.objects,c||h(),a.response?Object.assign(Object.assign({},t),{object:a.response}):t):(o.animatorLogger.log("[i] Stop background scan"),a.response=void 0,a.outputObjects=void 0,Object.assign(Object.assign({},t),{message:"BackgroundScanStopped"}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(5);t.actionCheckForUserChallenge=e=>{var t;for(const[n,o]of e.userPromptOptions.entries())if(r.select(o.selector)&&r.select(o.hint))return{challengeDetails:{hintText:((null===(t=r.select(o.hint))||void 0===t?void 0:t.textContent)||"").replace(/\s+/g," ").trim(),type:"userPrompt",userPromptId:n},type:"checkForUserChallenge"};const n=r.listReCaptchaInfo().filter(e=>!e.solved).filter(e=>e.isChallengeVisible||!e.isInvisibleRecaptcha)[0];return void 0!==n?{challengeDetails:{origin:window.location.origin,sitekey:n.sitekey,type:"recaptcha"},type:"checkForUserChallenge"}:{challengeDetails:{type:"none"},type:"checkForUserChallenge"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(5);t.actionSetRecaptchaToken=e=>{if(r.listReCaptchaInfo().filter(t=>t.sitekey===e.sitekey).forEach(t=>t.responseField.value=e.responseToken),window.___grecaptcha_cfg)i(e.sitekey,e.responseToken);else{const t=document.createElement("script");t.textContent=`(${i.toString()})("${o(e.sitekey)}", "${o(e.responseToken)}")`,(document.head||document.documentElement).appendChild(t),(document.head||document.documentElement).removeChild(t)}return{type:"setRecaptchaToken"}};const o=e=>e.replace(/"/g,'\\"');function i(e,t){const n=window.___grecaptcha_cfg;"object"==typeof(null==n?void 0:n.clients)&&null!==(null==n?void 0:n.clients)&&Object.values(n.clients).forEach(n=>{if("object"!=typeof n||null===n)return;const r=Object.values(n).filter(e=>"object"==typeof e&&null!==e).filter(e=>!(e instanceof HTMLElement||e instanceof Promise)).filter(e=>1===Object.keys(e).length).map(e=>Object.values(e)[0]).filter(t=>(null==t?void 0:t.sitekey)===e)[0];"function"==typeof(null==r?void 0:r.callback)?r.callback(t):"string"==typeof(null==r?void 0:r.callback)&&"function"==typeof window[r.callback]&&window[r.callback](t),"function"==typeof(null==r?void 0:r["promise-callback"])&&r["promise-callback"](t)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(9),o=n(4),i=n(5);t.SET_PROFILES={dashlane:{items:[["event","focus"],["event","click"],["event","keydown"],["fill"],["event","input"],["event","keyup"],["event","blur"],["event","change"]],name:"dashlane"},"from-user":{items:[],name:"from-user"},"no-event":{items:[["fill"]],name:"no-event"}},t.setWithProfile=(e,n,s)=>{if(!n||0===n.length)return Error("NoSelectedElements");n.length>1&&o.animatorLogger.log("[i] MoreThanOneElementSelected");const a=n[0],c=t.SET_PROFILES[e];for(const e of c.items)switch(e[0]){case"event":i.fireEvent(String(e[1]),a);break;case"fill":a.value=""+s;break;default:throw new r.ApcError("InvalidSetProfileItem")}},t.actionSet=e=>{const n=r.filterProps(e,["value"]);let o=void 0!==e.profile?e.profile:"dashlane";const s=i.selectAllElements(e);if(!s)return Object.assign(Object.assign({},n),{error:"SelectorNotFound"});if("react"===e.method){const t=i.setReact(s,e.value);return t?Object.assign(Object.assign({},n),{error:t.message}):n}e.profileItems&&(o="from-user",t.SET_PROFILES[o].items=e.profileItems);const a=t.setWithProfile(o,s,e.value);return a?Object.assign(Object.assign({},n),{error:a.message}):n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(4);t.actionWaitForFunction=e=>{const t={type:e.type};let n,o;try{n=Function(`return (${e.code})`)()}catch(e){r.animatorLogger.log("[-] WaitForFunction Error: "+e.message),o=e.message}return n?t:Object.assign(Object.assign({},t),{error:o})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(9),o=n(28),i=n(8),s=n(5);t.ANIMATOR_INFO={name:"pc-animator",startedOn:Date.now(),version:r.EngineVersion};t.dispatchAction=e=>{switch(e.type){case"eval":return i.actionEval(e);case"set":return i.actionSet(e);case"exists":return i.actionExists(e);case"click":return i.actionClick(e);case"getCurrentUrl":return i.actionGetCurrentUrl(e);case"getAnimatorInfo":return(e=>{const n=s.objectToDict(navigator);return Object.assign(Object.assign({},e),{navigator:n,animator:t.ANIMATOR_INFO})})(e);case"scanOutputObjects":return i.actionScanOutputObjects(e);case"checkForUserChallenge":return i.actionCheckForUserChallenge(e);case"setRecaptchaToken":return i.actionSetRecaptchaToken(e);case"waitForFunction":return i.actionWaitForFunction(e);case"fetch":return i.actionFetch(e);case"getCookies":return i.actionGetCookies(e);default:return{error:o.errors.unknownMessageType,type:e.type}}},t.dispatchMessage=e=>{if(i.clearLogs(),!e)return s.encodeObject({error:o.errors.emptyMessage});const n=r.parseJson(e);if(n instanceof Error)return s.encodeObject({error:o.errors.messageDecodeError,errorDetails:n.message});if(!n.type)return s.encodeObject({error:o.errors.messageWithoutType});const a=t.dispatchAction(n);return s.encodeObject(a)}},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});function o(e){const t=atob(e);return new Uint8Array(t.length).map((e,n)=>t.charCodeAt(n)).buffer}function i(e){const t=Array.from(new Uint8Array(e)).map(e=>String.fromCharCode(e)).join("");return window.btoa(t)}t.generatePageDump=(e,t,n)=>r(void 0,void 0,void 0,(function*(){const r=document.documentElement.cloneNode(!0);r.querySelectorAll('input:not([type="submit"]):not([type="button"]),textarea').forEach(e=>{e.value?e.setAttribute("value","[filled]"):e.removeAttribute("value")});const s={hostname:document.location.hostname,href:document.location.href,html:encodeURIComponent(r.outerHTML),platform:n,recipeName:e,recipeVersion:t},a=yield window.crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt"]),c=window.crypto.getRandomValues(new Uint8Array(16)),u=yield window.crypto.subtle.encrypt({iv:c,name:"AES-GCM"},a,o(btoa(JSON.stringify(s)))),l=yield window.crypto.subtle.importKey("spki",o("MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAug+LlZFuh6v5C4H2sp9EyEqOVLBQFZFGhvrCIyX6F6zZWngXdVvgP/CgriP0KGhgatwidy6x2mDfkxQwsIGcdt3IvQDNWhlzldlfEOkuCtkzMs+PS5Y1MpsIqeL81LLarjuj3fEwhuOgDMw0Y4pC5xrTy1W37eex2pzavJ867jj9pahFJZt2KjOV0H6Uq/CAifCptE6DcsyDm1v7X7mEZx41OWea0lY4YdVdwcIB15JTqVccwvRioNf1mP6VT9H5bQCGaDA+8i3PDMUrMhjv4/JxgoJVNiO48KqT+xe4bj0xfZyfm6SG1W8DBZt7GTH0qVRZbyrAakiB6P3d0KZwmQIDAQAB"),{hash:{name:"SHA-256"},name:"RSA-OAEP"},!1,["wrapKey"]),f=yield window.crypto.subtle.wrapKey("raw",a,l,"RSA-OAEP");return JSON.stringify({dumpVersion:1,encryptedAesKey:i(f),encryptedPageDump:i(u),iv:i(c)})}))},function(e,t,n){"use strict";n.r(t);var r=n(8),o=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};var i=n(2);class s extends i.GenericChannel{constructor(){super(),this._port=chrome.runtime.connect({name:"PasswordChangerContentScriptChromeChannel"}),this._port.onMessage.addListener(e=>{this._messageReceived(e)}),this._port.onDisconnect.addListener(()=>{this._port=null,this._disconnected()}),this._connected()}send(e){if(!this._port)throw new Error("ChromeChannel: no port");this._port.postMessage(e)}}class a{constructor(e){this.events=e}bind(e,t){this.events[e].on(t)}}const c={waitForReady:Object(i.slot)(),sendMessageToAnimator:Object(i.slot)(),getDump:Object(i.slot)()},u={log:Object(i.slot)()},l=Object(i.combineEvents)(c,u);!function(){const e=Object(i.createEventBus)({events:l,channels:[new s]}),t=e;!function(e,t){const n=(n,i)=>{e.bind(n,e=>o(this,void 0,void 0,(function*(){Object(r.clearLogs)();const n=yield i(e);return yield t.log(Object(r.getLog)()),n})))};n("sendMessageToAnimator",r.dispatchMessage),n("waitForReady",e=>document.location.href===e.url),n("getDump",e=>o(this,void 0,void 0,(function*(){return{data:yield Object(r.generatePageDump)(e.recipeName,e.recipeVersion,"saex")}})))}(new a(e),t)}()}]);